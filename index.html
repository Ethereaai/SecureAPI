<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1.0" />
  <title>SecureAPI - Go From Code to Live AI App, Securely</title>

  <!-- Styles & Icons -->
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet" />
  <script src="https://unpkg.com/lucide@latest"></script>

  <style>
    html { scroll-behavior:smooth; }
    body { font-family:'Inter',sans-serif; }
    .gradient-bg   { background:linear-gradient(135deg,#6366f1 0%,#8b5cf6 50%,#d946ef 100%); }
    .coming-soon-box { background:repeating-linear-gradient(45deg,#f3f4f6,#f3f4f6 10px,#e5e7eb 10px,#e5e7eb 20px); }
  </style>
</head>
<body class="bg-gray-50 text-gray-800">

<!-- ─── Header ────────────────────────────────────────────── -->
<header class="sticky top-0 bg-white/80 backdrop-blur-md z-50 border-b border-gray-200">
  <div class="max-w-7xl mx-auto px-6">
    <div class="flex justify-between items-center h-16">
      <a href="#" class="flex items-center">
        <i data-lucide="shield-check" class="w-7 h-7 text-indigo-600 mr-2"></i>
        <span class="font-bold text-xl">SecureAPI</span>
      </a>
      <nav class="hidden md:flex items-center space-x-6">
        <a href="#pro-features" class="text-sm font-medium text-gray-600 hover:text-indigo-600">Features</a>
        <a href="#pricing"      class="text-sm font-medium text-gray-600 hover:text-indigo-600">Pricing</a>
      </nav>
      <a href="#upload" class="hidden md:inline-block bg-indigo-600 text-white font-semibold px-4 py-2 rounded-lg text-sm hover:bg-indigo-700">Get Started</a>
    </div>
  </div>
</header>

<!-- ─── Hero ──────────────────────────────────────────────── -->
<section class="gradient-bg text-white py-24 px-6 text-center">
  <div class="max-w-4xl mx-auto">
    <h1 class="text-4xl md:text-5xl font-bold mb-4">Go From Code to Live AI App, Instantly</h1>
    <p class="text-lg md:text-xl mb-8">Stuck with an amazing AI project but terrified of leaking your OpenAI key? SecureAPI scans your code, magically fixes security issues, and gets you ready to deploy in minutes.</p>
    <a href="#upload" class="inline-block bg-white text-indigo-600 font-semibold px-8 py-3 rounded-lg shadow-lg hover:bg-gray-100 text-lg">Make My App Launch-Ready</a>
  </div>
</section>

<!-- HOW IT WORKS SECTION -->
<section class="py-20 px-6 bg-white">
    <div class="max-w-5xl mx-auto text-center">
      <h2 class="text-3xl font-bold mb-12">Your 3-Step Launchpad</h2>
      <div class="grid md:grid-cols-3 gap-10">
        <div class="text-center">
          <div class="inline-block p-4 bg-indigo-100 text-indigo-600 rounded-full mb-4">
            <i data-lucide="upload-cloud" class="w-8 h-8"></i>
          </div>
          <h3 class="text-xl font-semibold mb-2">1. Upload Your Project</h3>
          <p class="text-gray-600">Import the .zip file of your AI agent or app. No git commands needed.</p>
        </div>
        <div class="text-center">
          <div class="inline-block p-4 bg-indigo-100 text-indigo-600 rounded-full mb-4">
            <i data-lucide="shield-check" class="w-8 h-8"></i>
          </div>
          <h3 class="text-xl font-semibold mb-2">2. We Magically Secure It</h3>
          <p class="text-gray-600">We find exposed API keys and automatically move them to a secure `.env` file.</p>
        </div>
        <div class="text-center">
          <div class="inline-block p-4 bg-indigo-100 text-indigo-600 rounded-full mb-4">
            <i data-lucide="rocket" class="w-8 h-8"></i>
          </div>
          <h3 class="text-xl font-semibold mb-2">3. Deploy to the World</h3>
          <p class="text-gray-600">Download your launch-ready code and deploy it with our recommended partners.</p>
        </div>
      </div>
    </div>
</section>

<!-- ─── Upload Section ─────────────────────────────────────── -->
<section id="upload" class="py-20 px-6 bg-gray-50">
  <div class="max-w-3xl mx-auto text-center">
    <h2 class="text-3xl font-bold mb-6">Let's Get Your Project Ready</h2>
    <div class="border border-gray-200 p-8 rounded-xl bg-white shadow-sm">
      <div id="uploadBox">
        <div class="mb-4" id="file-upload-area">
          <input type="file" id="fileInput" name="project" accept=".zip" class="hidden" />
          <button id="chooseFileBtn" class="bg-indigo-50 text-indigo-700 font-semibold py-2 px-4 rounded-full hover:bg-indigo-100">Choose file</button>
          <span id="fileName" class="ml-4 text-gray-600"></span>
        </div>
        <div id="file-actions" class="hidden">
          <button type="submit" id="submitBtn" class="bg-indigo-600 hover:bg-indigo-700 text-white px-8 py-3 rounded-md font-semibold">Scan & Secure</button>
          <button type="button" id="clearFile" class="ml-2 bg-red-500 hover:bg-red-600 text-white px-4 py-3 rounded-md font-medium">Remove</button>
        </div>
      </div>
      <div id="loading" class="mt-4 hidden">🔄 Scanning…</div>
      <div id="result"  class="mt-4 text-sm hidden"></div>
      <div id="error"   class="mt-4 text-sm text-red-600"></div>
    </div>
  </div>
</section>

  <!-- LAUNCH & ENHANCE AFFILIATE SECTION (REPLACES DEPLOYMENT SECTION) -->
  <section class="py-20 bg-white">
      <div class="max-w-6xl mx-auto px-6 text-center">
          <h3 class="text-3xl font-bold text-gray-800 mb-4">The Complete AI App Starter Kit</h3>
          <p class="text-gray-600 mb-10">Everything you need to deploy, manage, and scale your first AI application, recommended by us.</p>
          <div class="grid grid-cols-2 md:grid-cols-4 gap-6">
              <a href="#" title="Visit Netlify" class="relative group flex flex-col items-center justify-center p-6 bg-white border border-gray-200 rounded-xl hover:shadow-lg hover:border-indigo-500 transition-all duration-200">
                  <div class="absolute top-0 right-0 -mt-2 -mr-2"><span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-bold bg-emerald-100 text-emerald-800">Highly Recommended</span></div>
                  <img class="h-10 mb-3" src="https://www.svgrepo.com/show/354110/netlify-icon.svg" alt="Netlify"><span class="font-semibold text-gray-700">Netlify</span><span class="text-xs text-gray-500 mt-1">30% Lifetime Commission</span>
              </a>
              <a href="#" title="Visit Clerk" class="flex flex-col items-center justify-center p-6 bg-white border border-gray-200 rounded-xl hover:shadow-lg hover:border-indigo-500 transition-all duration-200">
                  <img class="h-10 mb-3" src="https://avatars.githubusercontent.com/u/97495488?s=200&v=4" alt="Clerk"><span class="font-semibold text-gray-700">Clerk</span><span class="text-xs text-gray-500 mt-1">Add User Logins in Minutes</span>
              </a>
              <a href="#" title="Visit Resend" class="flex flex-col items-center justify-center p-6 bg-white border border-gray-200 rounded-xl hover:shadow-lg hover:border-indigo-500 transition-all duration-200">
                  <img class="h-10 mb-3" src="https://avatars.githubusercontent.com/u/124233958?s=200&v=4" alt="Resend"><span class="font-semibold text-gray-700">Resend</span><span class="text-xs text-gray-500 mt-1">Reliable Email for Your App</span>
              </a>
              <a href="#" title="Visit Helicone" class="flex flex-col items-center justify-center p-6 bg-white border border-gray-200 rounded-xl hover:shadow-lg hover:border-indigo-500 transition-all duration-200">
                  <img class="h-10 mb-3" src="https://avatars.githubusercontent.com/u/114283372?s=200&v=4" alt="Helicone"><span class="font-semibold text-gray-700">Helicone</span><span class="text-xs text-gray-500 mt-1">Monitor & Cache LLMs</span>
              </a>
              <a href="#" title="Visit Vercel" class="flex flex-col items-center justify-center p-6 bg-white border border-gray-200 rounded-xl hover:shadow-lg hover:border-indigo-500 transition-all duration-200">
                  <img class="h-10 mb-3" src="https://www.svgrepo.com/show/354512/vercel-icon.svg" alt="Vercel"><span class="font-semibold text-gray-700">Vercel</span><span class="text-xs text-gray-500 mt-1">Great for Next.js</span>
              </a>
              <a href="#" title="Visit Apify" class="flex flex-col items-center justify-center p-6 bg-white border border-gray-200 rounded-xl hover:shadow-lg hover:border-indigo-500 transition-all duration-200">
                  <img class="h-10 mb-3" src="https://www.svgrepo.com/show/373432/apify.svg" alt="Apify"><span class="font-semibold text-gray-700">Apify</span><span class="text-xs text-gray-500 mt-1">For Web Scraping & Data</span>
              </a>
              <a href="#" title="Visit Supabase" class="flex flex-col items-center justify-center p-6 bg-white border border-gray-200 rounded-xl hover:shadow-lg hover:border-indigo-500 transition-all duration-200">
                  <img class="h-10 mb-3" src="https://www.svgrepo.com/show/374111/supabase.svg" alt="Supabase"><span class="font-semibold text-gray-700">Supabase</span><span class="text-xs text-gray-500 mt-1">Backend & Database</span>
              </a>
              <a href="#" title="Visit Railway" class="flex flex-col items-center justify-center p-6 bg-white border border-gray-200 rounded-xl hover:shadow-lg hover:border-indigo-500 transition-all duration-200">
                  <img class="h-10 mb-3" src="https://www.svgrepo.com/show/374026/railway.svg" alt="Railway"><span class="font-semibold text-gray-700">Railway</span><span class="text-xs text-gray-500 mt-1">Flexible Deployments</span>
              </a>
          </div>
      </div>
  </section>

<!-- Pro Features Upsell Section -->
<section id="pro-features" class="py-20 px-6 bg-gray-50">
    <div class="max-w-4xl mx-auto text-center">
      <h2 class="text-3xl font-bold">Go from Code to Live URL in 90 Seconds</h2>
      <p class="mt-2 mb-8 text-gray-600">SecureAPI Pro is your personal deployment assistant. We handle the entire setup for you.</p>
      <div class="grid grid-cols-1 gap-8 text-left">
          
          <!-- The Single, Focused Pro Feature Card -->
          <div class="bg-white p-6 rounded-xl border border-indigo-500/50 shadow-lg">
            <div class="flex flex-col sm:flex-row items-start sm:items-center mb-4">
                <div class="flex items-center flex-shrink-0 mb-3 sm:mb-0">
                  <i data-lucide="rocket" class="w-8 h-8 text-indigo-500 mr-4"></i>
                  <h3 class="text-xl font-semibold">One-Click Deployment Concierge</h3>
                </div>
                <span class="sm:ml-auto bg-indigo-100 text-indigo-800 text-xs font-bold px-2.5 py-1 rounded-full">PRO FEATURE</span>
            </div>
            <p class="text-gray-600 mb-6">Stop wasting time on confusing configurations. We automatically create a private GitHub repository for your project and deploy it to a live URL on your favorite hosting provider (like Netlify or Vercel).</p>
            
            <div class="bg-gray-50/75 border border-gray-200 p-4 rounded-lg">
                <p class="text-sm font-semibold text-gray-700 mb-2">The Pro Workflow:</p>
                <ol class="list-decimal list-inside text-sm text-gray-600 space-y-1">
                    <li>Choose your secured project.</li>
                    <li>Connect your GitHub & Netlify/Vercel accounts (one-time setup).</li>
                    <li>We build the repository, configure secrets, and deploy your app.</li>
                    <li>You get a live URL, ready to share. It's that simple.</li>
                </ol>
            </div>

            <!-- === THIS IS THE NEWLY ADDED BUTTON === -->
            <div class="mt-6">
                <a href="#pricing" class="block w-full bg-indigo-600 text-white font-semibold py-3 px-6 rounded-lg text-center hover:bg-indigo-700 transition-colors">
                    Upgrade and Deploy Instantly
                </a>
            </div>
            <!-- ===================================== -->

          </div>

      </div>
    </div>
</section>

<!-- Pricing Section -->
<section id="pricing" class="py-20 px-6 bg-white">
    <div class="max-w-6xl mx-auto">
        <div class="text-center mb-12">
            <h2 class="text-3xl font-bold">Simple, Fair Pricing</h2>
            <p class="mt-2 text-gray-600">Start for free. Upgrade when you want to build faster.</p>
        </div>
      <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-8 items-start">
        
        <!-- Free Plan -->
        <div class="border border-gray-200 rounded-xl p-8 flex flex-col hover:shadow-md transition h-full">
            <h3 class="text-xl font-semibold mb-1">Free</h3>
            <p class="text-gray-600 mb-6">For getting your first projects live.</p>
            <div class="flex items-baseline mb-8"><span class="text-4xl font-bold">€0</span><span class="ml-1 text-gray-500">/forever</span></div>
            <ul class="space-y-3 mb-8 text-gray-600">
              <li class="flex items-center"><i data-lucide="check" class="w-4 h-4 mr-2 text-green-500"></i>3 scans per month</li>
              <li class="flex items-center"><i data-lucide="check" class="w-4 h-4 mr-2 text-green-500"></i>Secure code downloads</li>
              <li class="flex items-center"><i data-lucide="x" class="w-4 h-4 mr-2 text-gray-400"></i>One-Click Deployment</li>
              <li class="flex items-center"><i data-lucide="x" class="w-4 h-4 mr-2 text-gray-400"></i>Priority support</li>
            </ul>
            <button id="freeSignup" class="mt-auto w-full bg-gray-100 hover:bg-gray-200 text-gray-800 font-medium py-2 px-4 rounded-md transition">Get Started</button>
        </div>

        <!-- Pro Plan -->
        <div class="relative border-2 border-indigo-500 rounded-xl p-8 flex flex-col shadow-lg transform hover:scale-105 h-full">
          <div class="absolute top-0 -translate-y-1/2 left-1/2 -translate-x-1/2">
            <span class="inline-flex items-center px-4 py-1 rounded-full text-sm font-bold bg-indigo-500 text-white">BEST VALUE</span>
          </div>
          <div class="text-center pt-4"><h3 class="text-2xl font-semibold mb-1">Pro</h3><p class="text-indigo-600 mb-6">For building and launching faster.</p><div class="flex items-baseline justify-center mb-8"><span class="text-4xl font-bold">€9</span><span class="ml-1 text-gray-500">/month</span></div></div>
          <ul class="space-y-3 mb-8 text-gray-600">
              <li class="flex items-center"><i data-lucide="check" class="w-4 h-4 mr-2 text-green-500"></i><span class="font-bold">30</span> scans per month</li>
              <li class="flex items-center"><i data-lucide="check" class="w-4 h-4 mr-2 text-green-500"></i>One-Click Deployment Concierge</li>
              <li class="flex items-center"><i data-lucide="check" class="w-4 h-4 mr-2 text-green-500"></i>GitHub integration</li>
              <li class="flex items-center"><i data-lucide="check" class="w-4 h-4 mr-2 text-green-500"></i>Priority support</li>
          </ul>
          <button id="upgradePro" class="mt-auto w-full bg-indigo-600 hover:bg-indigo-700 text-white font-medium py-3 px-4 rounded-md transition">Upgrade to Pro</button>
        </div>

        <!-- Scale Plan (Coming Soon) -->
        <div class="border border-gray-200 rounded-xl p-8 flex flex-col h-full">
          <div class="flex justify-between items-center mb-1">
            <h3 class="text-xl font-semibold text-gray-700">Scale</h3>
            <span class="inline-block bg-gray-200 text-gray-600 font-semibold px-3 py-1 rounded-full text-xs">COMING SOON</span>
          </div>
          <p class="text-gray-500 mb-6">For teams and power users.</p>
          <p class="text-gray-400 mb-8">Custom scan limits, team management, and dedicated support.</p>
          <ul class="space-y-3 mb-8 text-gray-400">
            <li class="flex items-center"><i data-lucide="check" class="w-4 h-4 mr-2"></i>Increased scan limits</li>
            <li class="flex items-center"><i data-lucide="check" class="w-4 h-4 mr-2"></i>Team-based workflows</li>
            <li class="flex items-center"><i data-lucide="check" class="w-4 h-4 mr-2"></i>SAML SSO integration</li>
          </ul>
          <button disabled class="mt-auto w-full bg-gray-200 text-gray-500 font-medium py-2 px-4 rounded-md cursor-not-allowed">Contact Sales</button>
        </div>

      </div>
    </div>
</section>

<!-- Footer -->
<footer class="bg-white pt-10">
    <div class="max-w-4xl mx-auto px-6 mb-10">
      <a href="#" target="_blank" rel="noopener sponsored" class="block p-6 bg-gray-900 text-white rounded-xl hover:bg-gray-800 transition-all group">
        <div class="flex flex-col md:flex-row items-center justify-between">
          <div class="flex items-center mb-4 md:mb-0 text-left">
            <img src="https://www.svgrepo.com/show/303478/nordvpn-logo.svg" alt="NordVPN Logo" class="h-10 mr-5">
            <div>
              <h4 class="font-bold text-lg">Protect Your Developer Workflow</h4>
              <p class="text-sm text-gray-400">Secure your connection and keep your projects private with the VPN trusted by developers.</p>
            </div>
          </div>
          <div class="bg-blue-500 text-white font-bold py-2 px-5 rounded-lg group-hover:bg-blue-400 transition-colors flex-shrink-0 mt-4 md:mt-0">
            Get NordVPN
          </div>
        </div>
      </a>
    </div>
    <div class="py-10 text-center text-sm text-gray-500 border-t">
      © <span id="copyright-year"></span> SecureAPI | All rights reserved.
    </div>
</footer>

<!-- ─── Front-end Script ───────────────────────────────────── -->
<!-- ─── Front-end Script ───────────────────────────────────── -->
<script>
  // Initialize Lucide icons
  lucide.createIcons();

  // --- ELEMENT SELECTORS ---
  const submitBtn = document.getElementById('submitBtn');
  const fileInput = document.getElementById('fileInput');
  const chooseFileBtn = document.getElementById('chooseFileBtn');
  const fileNameSpan = document.getElementById('fileName');
  const fileActionsDiv = document.getElementById('file-actions');
  const loading = document.getElementById('loading');
  const resultDiv = document.getElementById('result');
  const errorDiv = document.getElementById('error');
  const clearFileBtn = document.getElementById('clearFile');

  // --- HELPER FUNCTIONS ---
  function resetUI() {
    fileInput.value = '';
    fileNameSpan.textContent = '';
    fileActionsDiv.classList.add('hidden');
    chooseFileBtn.classList.remove('hidden');
    resultDiv.classList.add('hidden');
    resultDiv.innerHTML = '';
    errorDiv.classList.add('hidden');
    errorDiv.textContent = '';
    loading.classList.add('hidden');
  }

  function showError(message) {
    errorDiv.textContent = message;
    errorDiv.classList.remove('hidden');
    loading.classList.add('hidden');
    fileActionsDiv.classList.remove('hidden');
  }

  function validateFile(file) {
    if (!file.name.toLowerCase().endsWith('.zip')) {
      return 'Please select a ZIP file.';
    }
    if (file.size > 10 * 1024 * 1024) {
      return 'File size must be less than 10MB.';
    }
    return null;
  }

  // --- EVENT LISTENERS ---
  chooseFileBtn.addEventListener('click', () => fileInput.click());

  fileInput.addEventListener('change', () => {
    if (fileInput.files.length > 0) {
      const file = fileInput.files[0];
      const validationError = validateFile(file);
      if (validationError) {
        showError(validationError);
        resetUI();
        return;
      }
      fileNameSpan.textContent = file.name;
      chooseFileBtn.classList.add('hidden');
      fileActionsDiv.classList.remove('hidden');
      errorDiv.classList.add('hidden');
      resultDiv.classList.add('hidden');
    }
  });
  
  clearFileBtn.addEventListener('click', resetUI);

  // Main Uploader Functionality
  submitBtn.addEventListener('click', async (e) => {
    e.preventDefault();
    resultDiv.classList.add('hidden');
    resultDiv.innerHTML = '';
    errorDiv.classList.add('hidden');
    
    const file = fileInput.files[0];
    if (!file) {
      showError('Please select a file to upload.');
      return;
    }
    const validationError = validateFile(file);
    if (validationError) {
      showError(validationError);
      return;
    }

    loading.classList.remove('hidden');
    fileActionsDiv.classList.add('hidden');

    try {
      const reader = new FileReader();
      const fileReadPromise = new Promise((resolve, reject) => {
        reader.onload = () => {
          const base64String = reader.result.split(',')[1];
          resolve(base64String);
        };
        reader.onerror = () => reject(new Error('Failed to read file'));
      });
      reader.readAsDataURL(file);
      const fileData = await fileReadPromise;

      const response = await fetch('/.netlify/functions/upload', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ fileData: fileData }),
      });
      
      const data = await response.json();

      if (!response.ok) {
          throw new Error(data.error || `Server responded with status ${response.status}`);
      }
      
      const successBox = document.createElement('div');
      successBox.className = 'text-left space-y-4';

      if (data.refactoredKeys && data.refactoredKeys.length > 0) {
        const successAlert = document.createElement('div');
        successAlert.className = 'p-4 bg-green-50 border border-green-200 text-green-800 rounded-lg';
        successAlert.innerHTML = `
          <div class="flex items-start">
            <div class="text-green-600 mr-3 mt-0.5">✅</div>
            <div>
              <h4 class="font-semibold mb-2">Success! Refactored ${data.refactoredKeys.length} secret(s)</h4>
              <p class="text-sm mb-2">The following secrets were moved to a new <code class="bg-green-100 px-1 rounded">.env</code> file:</p>
              <ul class="text-xs font-mono bg-green-100 p-2 rounded list-disc list-inside">
                ${data.refactoredKeys.map(key => `<li>${key}</li>`).join('')}
              </ul>
            </div>
          </div>`;
        successBox.appendChild(successAlert);
      }

      // THIS IS THE LINE I HAVE CORRECTED. It no longer has the stray period.
      if (data.redactedKeys && data.redactedKeys.length > 0) {
        const warningAlert = document.createElement('div');
        warningAlert.className = 'p-4 bg-yellow-50 border border-yellow-200 text-yellow-800 rounded-lg';
        warningAlert.innerHTML = `
          <div class="flex items-start">
            <div class="text-yellow-600 mr-3 mt-0.5">⚠️</div>
            <div>
              <h4 class="font-semibold mb-2">Manual Review Required</h4>
              <p class="text-sm mb-2">Found and redacted ${data.redactedKeys.length} potential secret(s) that need manual review:</p>
              <ul class="text-xs font-mono bg-yellow-100 p-2 rounded list-disc list-inside">
                ${data.redactedKeys.map(key => `<li>${key}</li>`).join('')}
              </ul>
              <p class="text-sm mt-2">These have been replaced with <code class="bg-yellow-100 px-1 rounded">***REDACTED_BY_SECUREAPI***</code> in your code.</p>
            </div>
          </div>`;
        successBox.appendChild(warningAlert);
      }

      if ((!data.refactoredKeys || data.refactoredKeys.length === 0) && (!data.redactedKeys || data.redactedKeys.length === 0)) {
        const cleanAlert = document.createElement('div');
        cleanAlert.className = 'p-4 bg-blue-50 border border-blue-200 text-blue-800 rounded-lg';
        cleanAlert.innerHTML = `
          <div class="flex items-start">
            <div class="text-blue-600 mr-3 mt-0.5">🛡️</div>
            <div>
              <h4 class="font-semibold mb-1">No Hard-coded Secrets Found</h4>
              <p class="text-sm">Your project looks secure! You have ${data.remainingScans} scan(s) remaining.</p>
            </div>
          </div>`;
        successBox.appendChild(cleanAlert);
      }

      resultDiv.appendChild(successBox);
      
      const buttonContainer = document.createElement('div');
      buttonContainer.className = 'mt-6 flex flex-wrap items-center justify-center gap-4';
      
      const downloadBtn = document.createElement('a');
      downloadBtn.href = `data:application/zip;base64,${data.downloadData}`;
      downloadBtn.download = `secured-${file.name}`;
      downloadBtn.className = 'inline-flex items-center gap-2 bg-green-600 hover:bg-green-700 text-white px-6 py-3 rounded-lg text-sm font-semibold transition-colors';
      downloadBtn.innerHTML = '⬇️ Download Secured Project';
      buttonContainer.appendChild(downloadBtn);

      const scanAnotherBtn = document.createElement('button');
      scanAnotherBtn.type = 'button';
      scanAnotherBtn.className = "inline-flex items-center gap-2 bg-gray-100 hover:bg-gray-200 text-gray-700 px-6 py-3 rounded-lg text-sm font-semibold transition-colors";
      scanAnotherBtn.innerHTML = '🔄 Scan Another File';
      scanAnotherBtn.addEventListener('click', resetUI);
      buttonContainer.appendChild(scanAnotherBtn);
      
      if (data.remainingScans !== undefined) {
        const remainingInfo = document.createElement('div');
        remainingInfo.className = 'w-full text-center text-sm text-gray-600 mt-2';
        remainingInfo.textContent = `${data.remainingScans} scan(s) remaining this month`;
        buttonContainer.appendChild(remainingInfo);
      }
      
      resultDiv.appendChild(buttonContainer);
      resultDiv.classList.remove('hidden');
      
    } catch (err) {
      console.error('Upload error:', err);
      showError(err.message || 'An unknown error occurred while processing your file.');
    } finally {
      loading.classList.add('hidden');
    }
  });

  // --- THESE LISTENERS NOW WORK CORRECTLY ---

  // Pricing Section Buttons
  document.getElementById('freeSignup').addEventListener('click', () => {
    document.getElementById('upload').scrollIntoView({ behavior: 'smooth' });
  });
  
  document.getElementById('upgradePro').addEventListener('click', () => {
    alert('Redirecting to Pro checkout...');
  });

  // Footer Copyright Year
  document.getElementById('copyright-year').textContent = new Date().getFullYear();

</script>
</body>
</html>